<table class="color4 bold">
  <col width="25%"/>
  <col width="25%"/>
  <col width="25%"/>
  <col width="25%"/>
  <tr>
    <td>
        <a id="#step1Link" href="LCI-Database_Data-collection_Crop_v1.xlsx" target="_blank">
            <div id="step1" class="stepBtn">
              <div class="stepTitle text-big text-uppercase">Step 1</div>
              <div class="stepText">Download the template</div>
            </div>
        </a>
    </td>
    <td id="step2" class="stepBtn">
        <div class="stepTitle text-big text-uppercase">Step 2</div>
        <div class="stepText">Fill in the template with your data</div>
    </td>
    <td id="step3" class="stepBtn">
      <div class="stepTitle text-big text-uppercase">Step 3</div>
      <form id="processGeneratorUploadForm" ng-submit="upload($event.target)" method="post" enctype="multipart/form-data">
          <input type="file" name="uploadFile" 
                      accept=".xls,.xlsx" required="required" 
                      class="upload"
                      ng-change="submitUploadForm($event.target)"/>
          <div class="stepText">Upload your template to ALCIG</div>
          <div>
            <input type="checkbox" checked name="canBeStored" value="true" ng-disabled="step != 0"/> 
            <span id="step3CheckboxText" class="text-very-small">I agree that Quantis stores this file for testing purposes</span>
          </div>
			</form>
    </td>
    <td id="step4" class="stepBtn" ng-class="{disabledStep: step == 0}">
      <div class="stepTitle text-big text-uppercase">Step 4</div>
      <form action="app/api/pub/generateScsv" method="post" ng-if="step == 1" style="display: inline;">
			  <input type="hidden" name="idResult" value="{{idResult}}"/>
			  <input type="hidden" name="filename" value="{{filename}}"/>
			  <input type="submit" id="scsvDownloadBtn"/>
			</form>
			<div class="stepText">Get a ready-to-import file for Simapro</div>
	  </td>
  </tr>
</table>

<!-- NOTE: kept as an example for later: we may want to display again the pop-up if we've closed it by mistake -->
<!-- Button trigger modal -->
<!-- <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#process-generation-step3-modal"> -->
<!--   Launch demo modal -->
<!-- </button> -->

<!-- Modal -->
<div class="modal fade" id="process-generation-step3-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" ng-class="{'modal-lg':hasWarnings, 'modal-lg': hasErrors}">
    <div class="modal-content alert" ng-class="{'successful':step == 1 ,'warnings':hasWarnings, 'errors': hasErrors}">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">
          <span ng-if="step == 1">File successfully uploaded</span>
          <span ng-if="step == 0">Generation Failed</span>
        </h4>
      </div>
      <div class="modal-body">
        <div ng-if="step == 1">You can now click on Step 4 to download the generated Simapro file</div>
        
        <div ng-if="hasErrors || hasWarnings">Uploaded file: {{filename}}</div>
        <div ng-if="hasErrors">Some errors were found during generation:</div>
					<table ng-if="hasErrors" class="errors-and-warnings-table">
					  <tr>
					    <th>Label</th>
					    <th>Line</th>
					    <th>Message</th>
					  </tr>
					  <tr ng-repeat="error in errors" ng-class-odd="'odd'" ng-class-even="'even'">
					    <td>{{error.resource}}</td>
					    <td>{{error.location}}</td>
					    <td>{{error.message}}</td>
					  </tr>
					</table>
					
					<div ng-if="hasWarnings">Some warnings for generation:</div>
					<table ng-if="hasWarnings" class="errors-and-warnings-table">
					  <tr>
					    <th>Label</th>
					    <th>Line</th>
					    <th>Message</th>
					  </tr>
					  <tr ng-repeat="warning in warnings" ng-class-odd="'odd'" ng-class-even="'even'">
					    <td>{{warning.resource}}</td>
					    <td>{{warning.location}}</td>
					    <td>{{warning.message}}</td>
					  </tr>
					</table>
      </div>
      <div class="modal-footer" ng-if="hasWarnings || hasErrors">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
